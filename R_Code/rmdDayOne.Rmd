---
title: "rmdDayOne"
output: html_document
editor_options: 
  chunk_output_type: console
---

```{r setup, include=FALSE}
# knitr::opts_chunk$set(eval = FALSE, echo = FALSE)
```

# Funktionen 

## Gute Funktionen

- Einfach
- Kurz
- Abgeschlossen (self-contained)

## Zielsetzung

- Abstraktion
- Vermeidung von Redundanz

```{r eval = FALSE}
someFunction <- function(<args>) {
  <body>
} 
```

```{r}
someFunction <- function(x) {
  x
}
someFunction(1)
```

## Arguments

```{r}
args(someFunction)
formals(someFunction)
```


## Body

```{r}
body(someFunction)
```

## Environment

```{r}
environment(someFunction)
```


## Function arguments

- exact
- partial
- positional

```{r}
mydata <- c(rnorm(100), NA)

sd(mydata, na.rm = TRUE)
sd(na.rm = TRUE, mydata)
```

## Defaults

```{r}
someFunction <- function(x, mul = x) x * mul
someFunction(3)

tail <- function(df, selection = nrow(df)) df[selection, ] 
df <- data.frame(x = rnorm(10))
tail(df)
tail(df, 1:3)
```

## Missing Arguments

```{r}
someFunction <- function(a, b) {
  cat(a, "\n")
  cat(b)
}

someFunction("a")

someFunction <- function(a) {
  cat(a, "\n")
  cat(b)
}

b <- "b"
someFunction("a")

a <-"test1"
b <- "test2"

newFunction <- function(a, b) {
  cat(a, "\n")
  cat(b)
}

```

## Ellipses Argument

```{r}
args(cat)
myplot <- function(x, y, type = "l", ...) plot(x, y, type = type, ...)
myplot(1:10, rnorm(10))
```



## Infix Functions

```{r}
"+" <- function(lhs, rhs) lhs - rhs
1 + 2
rm("+")

"%paste%" <- function(lhs, rhs) paste(lhs, rhs)
"left" %paste% 
  "right" %paste%
  "more"

"%paste%"("left", "right")
```

## Replacement Functions

```{r}
names(df)
names(df) <- "y"

df <- "names<-"(df, "y")
```


# Scoping Rules

- Welche Namen / Objekte können gefunden werden?
- Wann können diese Objekte gefunden werden?

```{r}

b <- function(x) {
  
  a <- function(y) {
    y^2
  }
  a(x)
}

b(2)
```


```{r}
y <- 2

b <- function(x, sep = "") {
  lapply(x, function(x) {
    sep
  })
}

b(10)
```


## Dynamic Lookup

```{r}
someFunction <- function(x) {
  someOtherFunction(x)
}

someOtherFunction <- function(y) y
someFunction(1)
```


## Name Masking

```{r}
nrow(df)
dim <- function(df) 2
nrow(df)

mynrow <- function(x) dim(x)[1L]
mynrow(df)
```




